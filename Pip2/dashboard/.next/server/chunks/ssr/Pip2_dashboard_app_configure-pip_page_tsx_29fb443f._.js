module.exports=[13145,a=>{"use strict";var b=a.i(67491),c=a.i(4546),d=a.i(33365);function e(){let{data:a,status:e}=(0,d.useSession)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=[{name:"rollcloud",description:"Connect your RollCloud extension to Discord",category:"RollCloud",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"character",description:"Set your active character for rolls",category:"RollCloud",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"characters",description:"List your synced characters",category:"RollCloud",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"sheet",description:"View character sheet information",category:"RollCloud",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"stats",description:"Quick stat lookup and rolls",category:"RollCloud",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"roll",description:"Roll dice with modifiers",category:"Utility",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"ping",description:"Check bot responsiveness",category:"Utility",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"help",description:"Show help information",category:"Utility",defaultPermissions:["USE_APPLICATION_COMMANDS"],enabled:!0},{name:"reactionrole",description:"Configure reaction roles",category:"Moderation",defaultPermissions:["MANAGE_ROLES"],enabled:!1},{name:"changelog",description:"Manage changelog entries",category:"Moderation",defaultPermissions:["MANAGE_MESSAGES"],enabled:!1},{name:"ticket",description:"Create and manage tickets",category:"Moderation",defaultPermissions:["MANAGE_CHANNELS"],enabled:!1}];(0,c.useEffect)(()=>{"authenticated"===e?u():o(!1)},[e]);let u=async()=>{try{let a=await fetch("/api/discord/servers");if(!a.ok){if(401===a.status)throw Error("Discord token expired");throw Error("Failed to fetch servers")}let b=await a.json(),c=(await Promise.all(b.map(async a=>{let b=await v(a.id);return{...a,botMember:b}}))).filter(a=>a.permissions.includes("ADMINISTRATOR")||a.permissions.includes("MANAGE_GUILD"));g(c),k(t)}catch(a){console.error("Error loading servers:",a),g([]),k([])}finally{o(!1)}},v=async a=>{try{let b=await fetch(`/api/discord/bot-in-server/${a}`);if(b.ok)return(await b.json()).botPresent;return!1}catch(a){return console.error("Error checking bot presence:",a),!1}},w=async a=>{s(a);try{let b=process.env.NEXT_PUBLIC_DISCORD_CLIENT_ID||"YOUR_BOT_CLIENT_ID",c=`https://discord.com/oauth2/authorize?client_id=${b}&permissions=VIEW_CHANNEL%20SEND_MESSAGES%20USE_APPLICATION_COMMANDS%20MANAGE_ROLES%20MANAGE_CHANNELS%20MANAGE_MESSAGES%20EMBED_LINKS%20ATTACH_FILES%20READ_MESSAGE_HISTORY&scope=bot%20applications.commands&guild_id=${a}`;window.open(c,"_blank"),setTimeout(()=>{u(),s(null)},5e3)}catch(a){console.error("Error inviting bot:",a),s(null)}},x=async a=>{try{m({id:a,welcomeChannel:"welcome-channel",logChannel:"logs",adminRole:"Admin",modRole:"Moderator",autoRoles:["Member"]})}catch(a){console.error("Error loading server settings:",a)}},y=async()=>{if(h){q(!0);try{await new Promise(a=>setTimeout(a,1e3));let a=j.filter(a=>a.enabled);console.log(`Saving configuration for server ${h.name}:`,a),alert(`Configuration saved for ${h.name}!

Enabled commands: ${a.length}/${j.length}`)}catch(a){console.error("Error saving configuration:",a),alert("Failed to save configuration. Please try again.")}finally{q(!1)}}},z=j.reduce((a,b)=>(a[b.category]||(a[b.category]=[]),a[b.category].push(b),a),{});return"loading"===e||n?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,b.jsx)("div",{className:"text-green-600",children:"Loading..."})}):a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Configure Pip"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage slash commands and settings for servers where you're an admin"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("img",{src:a.user?.image||"",alt:a.user?.name||"",className:"w-10 h-10 rounded-full"}),(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:a.user?.name})]})]})}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Select Server"}),0===f.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Servers Found"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You don't have any Discord servers where you have admin permissions, or Pip isn't in any of your servers yet."}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,b.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Want to add Pip to a server?"}),(0,b.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"You can invite Pip to any Discord server where you have admin permissions."}),(0,b.jsx)("button",{onClick:()=>window.open("https://discord.com/oauth2/authorize?client_id=YOUR_BOT_CLIENT_ID&permissions=8&scope=bot%20applications.commands","_blank"),className:"bg-[#5865F2] hover:bg-[#4752C4] text-white px-4 py-2 rounded-lg font-medium transition",children:"Invite Pip to Server"})]}),(0,b.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,b.jsx)("h4",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"Create a new server"}),(0,b.jsx)("p",{className:"text-sm text-green-800 dark:text-green-200 mb-3",children:"Don't have a server yet? Create a new Discord server to get started with Pip."}),(0,b.jsx)("button",{onClick:()=>window.open("https://discord.com/new","_blank"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition",children:"Create New Server"})]}),(0,b.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,b.jsx)("p",{children:"After adding Pip to a server or creating a new one, refresh this page to see your servers."})})]})]}):(0,b.jsx)("div",{className:"grid gap-4",children:f.map(a=>(0,b.jsx)("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${h?.id===a.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>{i(a),x(a.id)},children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:a.icon?(0,b.jsx)("img",{src:`https://cdn.discordapp.com/icons/${a.id}/${a.icon}.png`,alt:a.name,className:"w-12 h-12 rounded-full"}):(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-300 font-bold",children:a.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.name,a.owner&&(0,b.jsx)("span",{className:"text-xs bg-yellow-500 text-white px-2 py-1 rounded",children:"Owner"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,b.jsx)("span",{className:a.botMember?"text-green-600":"text-red-600",children:a.botMember?"✅ Pip is in server":"❌ Pip not in server"}),(0,b.jsx)("span",{children:a.permissions.includes("ADMINISTRATOR")?"Administrator":"Manage Server"})]})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:!a.botMember&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),w(a.id)},disabled:r===a.id,className:"bg-[#5865F2] hover:bg-[#4752C4] text-white px-3 py-1.5 rounded text-sm font-medium transition disabled:opacity-50",children:r===a.id?"Inviting...":"Invite Pip"})})]})},a.id))})]}),h&&h.botMember&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold",children:["Slash Commands for ",h.name]}),(0,b.jsx)("button",{onClick:y,disabled:p,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition disabled:opacity-50",children:p?"Saving...":"Save Configuration"})]}),(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(z).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-3 text-green-600 dark:text-green-400",children:a}),(0,b.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("code",{className:"bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded text-sm",children:["/",a.name]}),(0,b.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Requires: ",a.defaultPermissions.join(", ")]})]}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.enabled,onChange:()=>{var b;return b=a.name,void k(a=>a.map(a=>a.name===b?{...a,enabled:!a.enabled}:a))},className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"})]})]},a.name))})]},a))})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-6",children:["Server Settings for ",h.name]}),l?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Channel Configuration"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Welcome Channel"}),(0,b.jsx)("input",{type:"text",value:l.welcomeChannel||"",onChange:a=>m(b=>b?{...b,welcomeChannel:a.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#welcome"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Log Channel"}),(0,b.jsx)("input",{type:"text",value:l.logChannel||"",onChange:a=>m(b=>b?{...b,logChannel:a.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#logs"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Role Configuration"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Role"}),(0,b.jsx)("input",{type:"text",value:l.adminRole||"",onChange:a=>m(b=>b?{...b,adminRole:a.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Admin"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Moderator Role"}),(0,b.jsx)("input",{type:"text",value:l.modRole||"",onChange:a=>m(b=>b?{...b,modRole:a.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Moderator"})]})]})]}),(0,b.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,b.jsx)("strong",{children:"Note:"})," Changes may take a few minutes to take effect in Discord. Some features require specific bot permissions to function properly."]})})]}):(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading server settings..."})})]})]})]}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 border border-gray-200 dark:border-gray-700 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-[#5865F2] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Configure Pip"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Connect with Discord to manage Pip's slash commands and server settings"}),(0,b.jsxs)("button",{onClick:()=>(0,d.signIn)("discord"),className:"bg-[#5865F2] hover:bg-[#4752C4] text-white px-6 py-3 rounded-lg font-medium transition flex items-center gap-3 mx-auto",children:[(0,b.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),"Sign in with Discord"]})]})})}a.s(["default",()=>e])}];

//# sourceMappingURL=Pip2_dashboard_app_configure-pip_page_tsx_29fb443f._.js.map