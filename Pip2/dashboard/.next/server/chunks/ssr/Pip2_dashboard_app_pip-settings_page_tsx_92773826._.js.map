{"version":3,"sources":["../../../../../../Pip2/dashboard/app/pip-settings/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ntype Tab = 'reaction-roles' | 'changelog' | 'bot-stats';\r\n\r\ninterface ReactionRole {\r\n  messageId: string;\r\n  emoji: string;\r\n  roleId: string;\r\n}\r\n\r\nexport default function PipSettingsPage() {\r\n  const [activeTab, setActiveTab] = useState<Tab>('reaction-roles');\r\n  const [reactionRoles, setReactionRoles] = useState<Record<string, Record<string, string>>>({});\r\n  const [changelog, setChangelog] = useState<string>('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'reaction-roles') {\r\n      fetchReactionRoles();\r\n    } else if (activeTab === 'changelog') {\r\n      fetchChangelog();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const fetchReactionRoles = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch('/api/reaction-roles');\r\n      const data = await response.json();\r\n      setReactionRoles(data.messages || {});\r\n    } catch (error) {\r\n      console.error('Failed to fetch reaction roles:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchChangelog = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch('/api/changelog');\r\n      const data = await response.json();\r\n      setChangelog(data.content || 'No changelog available');\r\n    } catch (error) {\r\n      console.error('Failed to fetch changelog:', error);\r\n      setChangelog('Failed to load changelog');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const tabs: { id: Tab; label: string }[] = [\r\n    { id: 'reaction-roles', label: 'Reaction Roles' },\r\n    { id: 'changelog', label: 'Changelog' },\r\n    { id: 'bot-stats', label: 'Bot Stats' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-3xl font-bold\">Pip 2 Settings</h1>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n        <nav className=\"flex space-x-8\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={`py-4 px-1 border-b-2 font-medium text-sm transition ${\r\n                activeTab === tab.id\r\n                  ? 'border-green-500 text-green-600 dark:text-green-400'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\r\n              }`}\r\n            >\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700\">\r\n        {/* Reaction Roles Tab */}\r\n        {activeTab === 'reaction-roles' && (\r\n          <div className=\"p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-xl font-bold\">Reaction Roles</h2>\r\n              <button\r\n                onClick={fetchReactionRoles}\r\n                className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm\"\r\n              >\r\n                Refresh\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-4 mb-6\">\r\n              <h3 className=\"font-semibold mb-2\">How to Use</h3>\r\n              <ol className=\"list-decimal list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400\">\r\n                <li>Use <code className=\"bg-gray-200 dark:bg-gray-600 px-1 rounded\">/reactionrole create</code> to create a message</li>\r\n                <li>Use <code className=\"bg-gray-200 dark:bg-gray-600 px-1 rounded\">/reactionrole add</code> to add emoji-to-role mappings</li>\r\n                <li>Users react to the message to self-assign roles</li>\r\n              </ol>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-4 border-green-600 border-t-transparent\"></div>\r\n              </div>\r\n            ) : Object.keys(reactionRoles).length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n                <p className=\"mb-2\">No reaction roles configured yet</p>\r\n                <code className=\"bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded inline-block text-sm\">\r\n                  /reactionrole create title:\"Choose Your Roles\"\r\n                </code>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {Object.entries(reactionRoles).map(([messageId, roles]) => (\r\n                  <div key={messageId} className=\"border border-gray-200 dark:border-gray-600 rounded-lg p-4\">\r\n                    <div className=\"flex items-center justify-between mb-3\">\r\n                      <span className=\"font-mono text-sm text-gray-600 dark:text-gray-400\">\r\n                        Message: {messageId}\r\n                      </span>\r\n                      <button\r\n                        onClick={() => navigator.clipboard.writeText(messageId)}\r\n                        className=\"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n                      >\r\n                        Copy ID\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {Object.entries(roles).map(([emoji, roleId]) => (\r\n                        <div key={emoji} className=\"flex items-center bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded\">\r\n                          <span className=\"mr-2\">{emoji.match(/^\\d+$/) ? 'â¬¡' : emoji}</span>\r\n                          <span className=\"text-xs font-mono text-gray-600 dark:text-gray-400\">{roleId}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Changelog Tab */}\r\n        {activeTab === 'changelog' && (\r\n          <div className=\"p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-xl font-bold\">Changelog</h2>\r\n              <button\r\n                onClick={fetchChangelog}\r\n                className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm\"\r\n              >\r\n                Refresh\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-4 mb-6\">\r\n              <h3 className=\"font-semibold mb-2\">Post to Discord</h3>\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                Use <code className=\"bg-gray-200 dark:bg-gray-600 px-1 rounded\">/changelog post</code> to post updates to your announcement channel.\r\n              </p>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-4 border-green-600 border-t-transparent\"></div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\r\n                <pre className=\"whitespace-pre-wrap font-sans text-sm leading-relaxed text-gray-700 dark:text-gray-300\">\r\n                  {changelog}\r\n                </pre>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Bot Stats Tab */}\r\n        {activeTab === 'bot-stats' && (\r\n          <div className=\"p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-xl font-bold\">Bot Stats</h2>\r\n            </div>\r\n\r\n            <div className=\"grid md:grid-cols-3 gap-4 mb-6\">\r\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center\">\r\n                <p className=\"text-3xl font-bold text-green-600\">--</p>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Servers</p>\r\n              </div>\r\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center\">\r\n                <p className=\"text-3xl font-bold text-green-600\">--</p>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Active Pairings</p>\r\n              </div>\r\n              <div className=\"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center\">\r\n                <p className=\"text-3xl font-bold text-green-600\">--</p>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">Turns Posted</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n              <p>Bot statistics coming soon</p>\r\n              <p className=\"text-sm mt-2\">Stats will show server count, active pairings, and usage metrics</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Command Reference */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700\">\r\n        <h2 className=\"text-xl font-bold mb-4\">Command Reference</h2>\r\n        <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <h3 className=\"font-semibold mb-2 text-green-600 dark:text-green-400\">Reaction Roles</h3>\r\n            <ul className=\"space-y-1 font-mono text-gray-600 dark:text-gray-400\">\r\n              <li>/reactionrole create</li>\r\n              <li>/reactionrole add</li>\r\n              <li>/reactionrole remove</li>\r\n              <li>/reactionrole list</li>\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold mb-2 text-green-600 dark:text-green-400\">Changelog</h3>\r\n            <ul className=\"space-y-1 font-mono text-gray-600 dark:text-gray-400\">\r\n              <li>/changelog view</li>\r\n              <li>/changelog post</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,MAUe,SAAS,IACtB,GAAM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,kBAC1C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyC,CAAC,GACtF,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAC7C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,AAAc,kBAAkB,GAClC,IACS,AAAc,aAAa,IACpC,GAEJ,EAAG,CAAC,EAAU,EAEd,IAAM,EAAqB,UACzB,GAAW,GACX,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,uBACvB,EAAO,MAAM,EAAS,IAAI,GAChC,EAAiB,EAAK,QAAQ,EAAI,CAAC,EACrC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kCAAmC,EACnD,QAAU,CACR,GAAW,EACb,CACF,EAEM,EAAiB,UACrB,GAAW,GACX,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,kBACvB,EAAO,MAAM,EAAS,IAAI,GAChC,EAAa,EAAK,OAAO,EAAI,yBAC/B,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,6BAA8B,GAC5C,EAAa,2BACf,QAAU,CACR,GAAW,EACb,CACF,EAQA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,qBAIrC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAdsB,AAelC,CAdP,CAAE,GAAI,iBAAkB,MAAO,gBAAiB,EAChD,CAAE,GAAI,YAAa,MAAO,WAAY,EACtC,CAAE,GAAI,YAAa,MAAO,WAAY,EACvC,CAWa,GAAG,CAAC,AAAC,GACT,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,EAAI,EAAE,EAClC,UAAW,CAAC,oDAAoD,EAC9D,IAAc,EAAI,EAAE,CAChB,sDACA,yHAAA,CACJ,UAED,EAAI,KAAK,EARL,EAAI,EAAE,OAenB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uGAEE,mBAAd,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAoB,mBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,2FACX,eAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2GACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,eACnC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wFACZ,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,OAAI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,yBAA2B,0BAC/F,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,OAAI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,sBAAwB,oCAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,0DAIP,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oGAEuB,IAAtC,OAAO,IAAI,CAAC,GAAe,MAAM,CACnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gBAAO,qCACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+EAAsE,sDAKxF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,OAAO,OAAO,CAAC,GAAe,GAAG,CAAC,CAAC,CAAC,EAAW,EAAM,GACpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAoB,UAAU,uEAC7B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,+DAAqD,YACzD,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,UAAU,SAAS,CAAC,SAAS,CAAC,GAC7C,UAAU,2GACX,eAIH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,OAAO,OAAO,CAAC,GAAO,GAAG,CAAC,CAAC,CAAC,EAAO,EAAO,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAgB,UAAU,6EACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gBAAQ,EAAM,KAAK,CAAC,SAAW,IAAM,IACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8DAAsD,MAF9D,QAdN,SA4BL,cAAd,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAoB,cAClC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,2FACX,eAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2GACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,oBACnC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDAA2C,OAClD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qDAA4C,oBAAsB,uDAIzF,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oGAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kGACZ,SAQI,cAAd,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAoB,gBAGpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kHACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAAoC,OACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,eAE1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kHACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAAoC,OACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,uBAE1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kHACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAAoC,OACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,uBAI5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,+BACH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAe,8EAOpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2GACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,sBACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iEAAwD,mBACtE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iEACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,yBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,sBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,yBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,6BAGR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iEAAwD,cACtE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iEACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,oBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,kCAOlB"}